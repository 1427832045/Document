{"TaskDefLoadExtraDevice":{"id":null,"name":"TaskDefLoadExtraDevice","description":"AGV安装工装","httpApiList":[{"path":"/task-by-operator/load-ext-device","method":"POST","reqDemoBody":"{\"menuId\":\"LoadExtraDevice\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"vehicleName\": \"DN-01 / DN-02\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请输入账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.vehicleName","message":"请输入AGV名称！"},"returnName":"vehicleName","components":[]},{"def":"CheckVehicleNotLoadExtDevice","params":{"vehicleName":"=vehicleName"},"returnName":null,"components":[]},{"def":"SetIntendedRobot","params":{"transport":"=task.transports[0]","robot":"=vehicleName"},"returnName":null,"components":[]},{"def":"ExistSameTaskOfOperateExtraDevice","params":{},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"skipCheck","value":"false"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"2F-I-1"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"B","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"等待安装工装结束","category":"","seqGroup":"B","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"true"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=load.location"},"returnName":null,"components":[]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefUnloadExtraDevice":{"id":null,"name":"TaskDefUnloadExtraDevice","description":"AGV拆卸工装","httpApiList":[{"path":"/task-by-operator/unload-ext-device","method":"POST","reqDemoBody":"{\"menuId\":\"UnloadExtraDevice\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"vehicleName\": \"DN-01 / DN-02\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.vehicleName","message":"请输入AGV名称！"},"returnName":"vehicleName","components":[]},{"def":"CheckVehicleLoadExtDevice","params":{"vehicleName":"=vehicleName"},"returnName":null,"components":[]},{"def":"SetIntendedRobot","params":{"transport":"=task.transports[0]","robot":"=vehicleName"},"returnName":null,"components":[]},{"def":"ExistSameTaskOfOperateExtraDevice","params":{},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"skipCheck","value":"false"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"2F-I-1"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"A","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"等待拆卸工装结束","category":"","seqGroup":"A","stages":[{"refName":"","description":"检查工装拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"false"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=unload.location"},"returnName":null,"components":[]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeMatFrom1FTo3F":{"id":null,"name":"TaskDefTakeMatFrom1FTo3F","description":"3楼原料运输","httpApiList":[{"path":"/task-by-operator/take-mat-from-1f-to-3f","method":"POST","reqDemoBody":"{\"menuId\":\"TakeMatFrom1Fto3F\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"1F-B-n\",\"toSite\": \"3F-C-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"false"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeMatFrom1FTo2F":{"id":null,"name":"TaskDefTakeMatFrom1FTo2F","description":"2楼原料运输(1F-A-->2F-D）","httpApiList":[{"path":"/task-by-operator/take-mat-from-1f-to-2f","method":"POST","reqDemoBody":"{\"menuId\":\"TakeMatFrom1Fto2F\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"1F-A-n\",\"toSite\": \"2F-G-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号后操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"false"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketFrom2fbTo2fd":{"id":null,"name":"TaskDefTakeBasketFrom2fbTo2fd","description":"2F插件送至三防收货（2F-B-->2F-K)","httpApiList":[{"path":"/task-by-operator/take-basket-from-2fb-to-2fd","method":"POST","reqDemoBody":"{\"menuId\":\"TakeMatFrom2fbTo2fd\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"2F-B-1\",\"toSite\": \"2F-D-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号后操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefReturnEmptyTrayTo1F":{"id":null,"name":"TaskDefReturnEmptyTrayTo1F","description":"空托盘运输（2F-E-->1F-B)","httpApiList":[{"path":"/task-by-operator/return-empty-tray","method":"POST","reqDemoBody":"{\"menuId\":\"ReturnEmptyTray\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"2F-H-1/3F-D-1\",\"toSite\": \"1F-C-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"false"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeTransportFreely":{"id":null,"name":"TaskDefTakeTransportFreely","description":"自由运输","httpApiList":[{"path":"/task-by-operator/transport-freely","method":"POST","reqDemoBody":"{\"menuId\":\"TransportFreely\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"loadDevice\": \"false\", \"fromSite\": \"1F-A-1\",\"toSite\": \"2F-A-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.loadDevice","message":"无法识别此任务是否需要加装工装，请选择运输方式！"},"returnName":"loadDevice","components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSiteId","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"=loadDevice"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketFrom3fnTo2fk":{"id":null,"name":"TaskDefTakeBasketFrom3fnTo2fk","description":"3F插件到三防插件(3F-N-->2F-K)","httpApiList":[{"path":"/task-by-operator/take-basket-from-3fn-to-2fk","method":"POST","reqDemoBody":"{\"menuId\":\"TakeBasketFrom3fnTo2fk\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"3F-N-1\",\"toSite\": \"2F-K-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号后再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketTo2F":{"id":null,"name":"TaskDefTakeBasketTo2F","description":"三防插件送至插件收货（2F-L-->2F-C）","httpApiList":[{"path":"/task-by-operator/take-basket-to-2f","method":"POST","reqDemoBody":"{\"menuId\":\"TakeBasketTo2F\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"3F-A-1\",\"toSite\": \"2F-E-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号后再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketTo3F":{"id":null,"name":"TaskDefTakeBasketTo3F","description":"装置2送至装置收货（2F-F-->2F-H)","httpApiList":[{"path":"/task-by-operator/take-basket-to-3f","method":"POST","reqDemoBody":"{\"menuId\":\"TakeBasketTo3F\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"2F-F-1\",\"toSite\": \"3F-B-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请输入账号后操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketFrom2fgTo3fp":{"id":null,"name":"TaskDefTakeBasketFrom2fgTo3fp","description":"装置3发货至3楼装置3收货(2F-G-->3F-P)","httpApiList":[{"path":"/task-by-operator/take-basket-from-2fg-to-3fp","method":"POST","reqDemoBody":"{\"menuId\":\"TakeBasketFrom2fgTo3fp\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"2F-G-1\",\"toSite\": \"3F-P-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号后再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketFrom2fcTo2fa":{"id":null,"name":"TaskDefTakeBasketFrom2fcTo2fa","description":"装置1送至装置收货（2F-A-->2F-H)","httpApiList":[{"path":"/task-by-operator/take-basket-from-2fc-to-2fa","method":"POST","reqDemoBody":"{\"menuId\":\"TakeMatFrom2fcTo2fa\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"2F-C-1\",\"toSite\": \"2F-A-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false},"TaskDefTakeBasketFrom2flTo3fm":{"id":null,"name":"TaskDefTakeBasketFrom2flTo3fm","description":"三防插件到3F插件(2F-L-->3F-M)","httpApiList":[{"path":"/task-by-operator/take-basket-from-2fl-to-3fm","method":"POST","reqDemoBody":"{\"menuId\":\"TakeBasketFrom2flTo3fm\",\"workType\":\"\",\"workStation\":\"\", \"params\":{\"fromSite\": \"2F-L-1\",\"toSite\": \"3F-M-1\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.workType","message":"请选择账号再操作"},"returnName":"workType","components":[]},{"def":"AppendTaskWorkType","params":{"workType":"=workType"},"returnName":null,"components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.fromSite","message":"请输入起点库位名称！"},"returnName":"fromSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=fromSiteId"},"returnName":"fromSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在起点库位【\" + fromSite\" + \"】！\""},"returnName":null,"components":[]}]},{"def":"TrimRequired","params":{"value":"=httpBody.params.toSite","message":"请输入终点库位名称！"},"returnName":"toSiteId","components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=toSiteId"},"returnName":"toSite","components":[]},{"def":"ThrowToWait","params":{"reason":"=\"不存在终点库位【\" + toSite + \"】！\""},"returnName":null,"components":[]}]},{"def":"SetTaskExtraVariables","params":{"name":"loadDevice","value":"true"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=take","value":"=fromSiteId"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=place","value":"=toSiteId"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSiteId","value":"=toSiteId"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"获取任务资源，并按需加装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定起点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockSiteOnlyIfNotLock","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定终点","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToLockEmptySite","params":{"siteId":"=place.location"},"returnName":null,"components":[]}]},{"refName":"","description":"是否需要加装工装","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"ApplyForVehicle","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"跳过指定运单","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CustomSkipTransport","params":{},"returnName":null,"components":[]}]}]},{"refName":"","description":"机器人去安装工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=load","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=load.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示安装工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Load-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Load-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"load","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"机器人去拆卸工装","category":"","seqGroup":"base","stages":[{"refName":"","description":"锁定工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetLocationName","params":{"destination":"=unload","value":"2F-I-1"},"returnName":null,"components":[]},{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=unload.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"锁定库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]},{"refName":"","description":"清空表示拆卸工装完成的信号","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"Unload-Finished"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"清空信号失败，请添加库位【Unload-Finished】，以记录安装/拆卸工装是否完成！"},"returnName":null,"components":[]}]}]},{"refName":"unload","description":"在工装操作库位待命","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]},{"refName":"","description":"将起点货物运输到终点","category":"","seqGroup":"base","stages":[{"refName":"","description":"检查工装安装/拆卸是否完成","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckLoadOrUnloadDeviceFinished","params":{"load":"=task.persistedVariables.loadDevice"},"returnName":null,"components":[]}]},{"refName":"","description":"解锁工装操作库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"IfNot","params":{"value":"=task.persistedVariables.skipCheck"},"returnName":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"2F-I-1"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"解锁库位【2F-I-1】失败，请检查库位是否存在及其状态！"},"returnName":null,"components":[]}]}]}]},{"refName":"take","description":"去起点取货，并解锁起点","forRoute":true,"operation":"ForkLoad","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"1\"}]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryToUnlockSiteIfLocked","params":{"siteId":"=take.location"},"returnName":null,"components":[]}]},{"refName":"place","description":"去终点放货","forRoute":true,"operation":"ForkUnload","location":"","properties":"[{\"key\":\"end_height\",\"value\":\"0\"}]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"释放执行当前运单的机器人","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"SetVehicleFreeIfTaskFinished","params":{},"returnName":null,"components":[]}]},{"refName":"","description":"占用终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"占用库位【\" + place.location + \"】失败，请检查此库位是否存在！\""},"returnName":null,"components":[]}]}]},{"refName":"","description":"解锁终点库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"TryCatch","params":{},"returnName":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=place.location"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"=\"锁定库位【\" + place.location + \"】失败，请检查库位是否存在及其状态！\""},"returnName":null,"components":[]}]}]}]}],"static":false,"parallel":false,"noTransport":false}}