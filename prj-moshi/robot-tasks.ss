{"transfer":{"id":null,"name":"transfer","description":"栈板物料运输","httpApiList":[{"path":"/task-by-operator/transfer","method":"POST","reqDemoBody":"{\"params\":{\"from\": \"MD2-01\", \"to\": \"MD2\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.params.from","message":"起点不能为空"},"returnName":"fromSite","components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.to","message":"终点不能为空"},"returnName":"type","components":[]},{"def":"checkSite","params":{"location":"=fromSite","filled":"from"},"returnName":null,"components":[]},{"def":"moLex:getOneSite","params":{"type":"=type"},"returnName":"toSite","components":[]},{"def":"SetTaskExtraVariables","params":{"name":"fromSite","value":"=fromSite"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSite","value":"=toSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=pre","value":"=\"Pre-\" + fromSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=pre2","value":"=\"Pre-\" + toSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=from","value":"=fromSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=to","value":"=toSite"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"到前置点","category":"","seqGroup":"a","stages":[{"refName":"","description":"锁定","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=fromSite"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=toSite"},"returnName":null,"components":[]}]},{"refName":"","description":"亮黄灯","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"lightYellow","params":{"location":"=fromSite"},"returnName":null,"components":[]},{"def":"lightYellow","params":{"location":"=toSite"},"returnName":null,"components":[]}]},{"refName":"pre","description":"起点前置点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"通知","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=fromSite","type":"from"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"AlertOperator","params":{"message":"=\"库位\"+fromSite+\"状态错误，请尽快处理！！\"","workStations":"","workTypes":"","all":"true"},"returnName":null,"components":[]}]}]},{"refName":"","description":"检查库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=fromSite","type":"from"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"CodeBlock","params":{},"returnName":null,"components":[{"def":"lightRed","params":{"location":"=fromSite"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"库位空"},"returnName":null,"components":[]}]},{"def":"lightYellow","params":{"location":"=fromSite"},"returnName":null,"components":[]}]}]}]},{"refName":"","description":"起点","category":"","seqGroup":"a","stages":[{"refName":"from","description":"起点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"=fromSite"},"returnName":null,"components":[]}]},{"refName":"pre2","description":"终点前置点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"通知","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=toSite","type":"to"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"AlertOperator","params":{"message":"=\"库位\"+toSite+\"状态错误，请尽快处理！！\"","workStations":"","workTypes":"","all":"true"},"returnName":null,"components":[]}]}]},{"refName":"","description":"检查库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=toSite","type":"to"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"CodeBlock","params":{},"returnName":null,"components":[{"def":"lightRed","params":{"location":"=toSite"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"库位非空"},"returnName":null,"components":[]}]},{"def":"lightYellow","params":{"location":"=toSite"},"returnName":null,"components":[]}]}]}]},{"refName":"","description":"终点","category":"","seqGroup":"a","stages":[{"refName":"to","description":"终点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"黄灯闪烁","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=toSite"},"returnName":null,"components":[]},{"def":"lightYellowTwinkle","params":{"location":"=toSite"},"returnName":null,"components":[]}]},{"refName":"","description":"释放库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=fromSite"},"returnName":null,"components":[]},{"def":"UnlockSiteIfLocked","params":{"siteId":"=toSite"},"returnName":null,"components":[]}]}]}],"static":false,"parallel":false,"noTransport":false},"test":{"id":null,"name":"test","description":"从A到B","httpApiList":[{"path":"/ext/test_1","method":"POST","reqDemoBody":"","successResponseCode":201,"responseDecorator":"","components":[]}],"transports":[{"refName":"","description":"运单1","category":"","seqGroup":"","stages":[{"refName":"","description":"阶段1","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"CheckStoreSiteEmpty","params":{"siteId":"MD2-01"},"returnName":"","components":[]}]},{"refName":"","description":"阶段2","forRoute":true,"operation":"Wait","location":"MD2-01","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]}]}],"static":false,"parallel":false,"noTransport":false},"updateSite":{"id":null,"name":"updateSite","description":"更新报错库位","httpApiList":[{"path":"/task-by-operator/updateSite","method":"POST","reqDemoBody":"{\"params\":{\"type\": \"from\",\"siteId\": \"MD2-01\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"CheckExistedStoreSiteById","params":{"siteId":"=httpBody.params.siteId"},"returnName":"","components":[]},{"def":"checkSite","params":{"location":"=httpBody.params.siteId","filled":"=httpBody.params.type"},"returnName":null,"components":[]},{"def":"updateErrorSite","params":{"location":"=httpBody.params.siteId"},"returnName":null,"components":[]}]}],"transports":[],"static":false,"parallel":false,"noTransport":true},"transfer-old":{"id":null,"name":"transfer-old","description":"栈板物料运输","httpApiList":[{"path":"/task-by-operator/transfer-old","method":"POST","reqDemoBody":"{\"params\":{\"from\": \"MD2-01\", \"to\": \"T-MD2-01\"}}","successResponseCode":201,"responseDecorator":"","components":[{"def":"TrimRequired","params":{"value":"=httpBody.params.from","message":"起点不能为空"},"returnName":"fromSite","components":[]},{"def":"TrimRequired","params":{"value":"=httpBody.params.to","message":"终点不能为空"},"returnName":"toSite","components":[]},{"def":"checkSite","params":{"location":"=fromSite","filled":"from"},"returnName":null,"components":[]},{"def":"checkSite","params":{"location":"=toSite","filled":"to"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"fromSite","value":"=fromSite"},"returnName":null,"components":[]},{"def":"SetTaskExtraVariables","params":{"name":"toSite","value":"=toSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=pre","value":"=\"Pre-\" + fromSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=pre2","value":"=\"Pre-\" + toSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=from","value":"=fromSite"},"returnName":null,"components":[]},{"def":"SetLocationName","params":{"destination":"=to","value":"=toSite"},"returnName":null,"components":[]}]}],"transports":[{"refName":"","description":"到前置点","category":"","seqGroup":"a","stages":[{"refName":"","description":"锁定","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=fromSite"},"returnName":null,"components":[]}]},{"refName":"","description":"锁定","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"LockSiteOnlyIfNotLock","params":{"siteId":"=toSite"},"returnName":null,"components":[]}]},{"refName":"","description":"亮黄灯","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"lightYellow","params":{"location":"=fromSite"},"returnName":null,"components":[]},{"def":"lightYellow","params":{"location":"=toSite"},"returnName":null,"components":[]}]},{"refName":"pre","description":"起点前置点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"通知","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=fromSite","type":"from"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"AlertOperator","params":{"message":"=\"库位\"+fromSite+\"状态错误，请尽快处理！！\"","workStations":"","workTypes":"","all":"true"},"returnName":null,"components":[]}]}]},{"refName":"","description":"检查库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=fromSite","type":"from"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"CodeBlock","params":{},"returnName":null,"components":[{"def":"lightRed","params":{"location":"=fromSite"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"库位空"},"returnName":null,"components":[]}]},{"def":"lightYellow","params":{"location":"=fromSite"},"returnName":null,"components":[]}]}]}]},{"refName":"","description":"起点","category":"","seqGroup":"a","stages":[{"refName":"from","description":"起点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteIdle","params":{"siteId":"=fromSite"},"returnName":null,"components":[]}]},{"refName":"pre2","description":"终点前置点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"通知","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=toSite","type":"to"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"AlertOperator","params":{"message":"=\"库位\"+toSite+\"状态错误，请尽快处理！！\"","workStations":"","workTypes":"","all":"true"},"returnName":null,"components":[]}]}]},{"refName":"","description":"检查库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"pass","params":{"location":"=toSite","type":"to"},"returnName":null,"components":[]},{"def":"If","params":{"value":"=pass == \"false\""},"returnName":null,"components":[{"def":"CodeBlock","params":{},"returnName":null,"components":[{"def":"lightRed","params":{"location":"=toSite"},"returnName":null,"components":[]},{"def":"ThrowToWait","params":{"reason":"库位非空"},"returnName":null,"components":[]}]},{"def":"lightYellow","params":{"location":"=toSite"},"returnName":null,"components":[]}]}]}]},{"refName":"","description":"终点","category":"","seqGroup":"a","stages":[{"refName":"to","description":"终点","forRoute":true,"operation":"Wait","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[]},{"refName":"","description":"黄灯闪烁","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"MarkSiteNotIdle","params":{"siteId":"=toSite"},"returnName":null,"components":[]},{"def":"lightYellowTwinkle","params":{"location":"=toSite"},"returnName":null,"components":[]}]},{"refName":"","description":"释放库位","forRoute":false,"operation":"","location":"","properties":"[]","maxRetries":null,"retryDelay":null,"components":[{"def":"UnlockSiteIfLocked","params":{"siteId":"=fromSite"},"returnName":null,"components":[]},{"def":"UnlockSiteIfLocked","params":{"siteId":"=toSite"},"returnName":null,"components":[]}]}]}],"static":false,"parallel":false,"noTransport":false}}